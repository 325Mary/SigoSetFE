<div class="container d-flex justify-content-center mt-5 mb-5">
  <div class="card">
    <div class="card-header card-header-sena-azul"> <!-- Contenedor del título -->
      <h4 class="card-title">Listado de Contratos</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered text-center">
        <thead>
          <div class="form-group" style="margin: 20px 10px; border: 2px solid #ccc; border-radius: 5px; padding: 0;">
            <input type="text" class="form-control" style="border: none;" placeholder="Buscar..."
              (input)="filtrarContratos()" [(ngModel)]="terminoBusqueda">
          </div>
          <tr>
            <th>ID</th>
            <th>Nombre Empresa</th>
            <th>Fecha Inicio</th>
            <th>Fecha Fin</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="contratosFiltrados.length > 0; else noResultados">
            <tr *ngFor="let contrato of contratosFiltrados.slice((currentPage - 1) * pageSize, currentPage * pageSize)">
              <td>{{ contratoIndex(contrato) }}</td>
              <td>{{ contrato.nombre_empresa }}</td>
              <td>{{ contrato.fecha_inicio | date: 'yyyy-MM-dd' }}</td>
              <td>{{ contrato.fecha_fin | date: 'yyyy-MM-dd' }}</td>
              <td>
                <button (click)="verPDF(contrato.contrato_pdf)"  title="Ver Contrato">
                  <i class="bi bi-file-pdf"></i> 
                </button>
                <button (click)="abrirModalEditar(contrato)" title="Editar contrato">
                  <i class="bi bi-pencil-square"></i>
                </button>
                <button (click)="eliminarContrato(contrato.idContrato_empresa)" title="Boton de eliminar">
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
          </ng-container>
        </tbody>
        <ng-template #noResultados>
          <tr>
            <td colspan="5" class="text-center">No se encontraron resultados.</td>
          </tr>
        </ng-template>
      </table>
      <div class="text-center mt-4" id="pagination">
        <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center">
            <li class="page-item" *ngFor="let page of getPages()" [class.active]="currentPage === page">
              <button class="page-link" (click)="setPage(page)">{{ page }}</button>
            </li>
          </ul>
        </nav>
      </div>
       <button class="btn btn-danger pull-right" (click)="abrirModalCrear()" title="Crear perfil">
      <i class="bi bi-plus"></i> Agregar contrato
    </button>
    </div>
   
  </div>

  
</div>

<!-- Paginación -->







<!-- Modal -->
<div class="modal" [class.show]="mostrarModalEditar">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Contenido del modal -->
      <app-editar-contrato [contratoSeleccionado]="contratoSeleccionado" (closeModal)="handleCloseModal()"
        (actualizarContratos)="actualizarContratos()"></app-editar-contrato>
    </div>
  </div>
</div>

<div class="modal" [class.show]="mostrarModalCrear">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Contenido del modal -->
      <app-crear-contrato (contratoCreado)="actualizarContratos()"
        (closeModal)="handleCloseModal()"></app-crear-contrato>
    </div>
  </div>
</div>
